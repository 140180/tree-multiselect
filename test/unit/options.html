<html>
  <div id="qunit-fixture"></div>
  <script src="../jquery-1.11.3.min.js"></script>
  <script src="../../src/jquery.tree-multiselect.js"></script>
  <script src="../qunit-1.18.0.js"></script>
  <script>
    QUnit.module("Options", {
      beforeEach: function(assert) {
        var select = document.createElement("select");
        $("div#qunit-fixture").append(select);
        assert.equal($("select").length, 1);
      }
    });

    QUnit.test("Is collapsible by default, but not collapsed", function(assert) {
      var data = {
        test: ["one", "two", "three"]
      };
      $("select").treeMultiselect(data);

      $("div.section").each(function() {
        var collapseDiv = $(this).find("> div.title > div.collapse");
        assert.equal(collapseDiv.length, 1, "should have a collapse div");
      });

      $("div.item").each(function() {
        assert.ok($(this).is(":visible"), "all items should be visible");
      });
    });

    QUnit.test("Can be collapsed if specified", function(assert) {
      var data = {
        test: ["one", "two", "three", {
          inner: "four",
          inner2: ["five", "six"]
        }]
      };

      var options = {
        startCollapsed: true
      };

      $("select").treeMultiselect(data, options);

      $("div.item").each(function() {
        assert.ok($(this).is(":hidden"), "all items should be hidden");
      });

      $("div.section div.section").each(function() {
        assert.ok($(this).is(":hidden"), "all inner sections should be hidden");
      });
    });

    QUnit.test("startCollapsed doesn't do anything if collapsible is false", function(assert) {
      var data = {
        test: ["one", "two", "three", {
          inner: "four",
          inner2: ["five", "six"]
        }]
      };

      var options = {
        collapsible: false,
        startCollapsed: true
      };

      $("select").treeMultiselect(data, options);

      $("div.item").each(function() {
        assert.ok($(this).is(":visible"), "all items should be hidden");
      });

      $("div.section div.section").each(function() {
        assert.ok($(this).is(":visible"), "all inner sections should be visible");
      });
    });
  </script>
</html>
